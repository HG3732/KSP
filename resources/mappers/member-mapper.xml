<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	<!-- 로그인 실패 시 비밀번호 초기화 횟수 증가 -->
	<update id="updateFailCnt" parameterType="string">
			UPDATE MEMBER SET MEMBER_FAIL_COUNT =  (SELECT MEMBER_FAIL_COUNT + 1 FROM MEMBER WHERE MEMBER_ID = #{mem_id}) 
				WHERE MEMBER_ID = #{mem_id}
		<selectKey resultType="int" keyProperty="MEMBER_FAIL_COUNT" order="AFTER">
			SELECT MEMBER_FAIL_COUNT FROM MEMBER WHERE MEMBER_ID = #{mem_id}
		</selectKey> 
	</update>
	
	<!-- 로그인 성공 시 초기화 -->
	<update id="resetFailCnt" parameterType="string">
		UPDATE MEMBER SET MEMBER_FAIL_COUNT = 0 
			WHERE MEMBER_ID = #{mem_id}
	</update>
</mapper>
